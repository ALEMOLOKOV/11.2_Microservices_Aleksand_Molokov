# 11.2_Microservices_Aleksand_Molokov

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

# Ответ
Ответ составил на основе информации взятой с различных источников по API Gateway (Пр-р https://geekflare.com/api-gateway/, https://www.tecmint.com/open-source-api-gateways-and-management-tools/, https://medium.com/apache-apisix/how-to-choose-the-right-api-gateway-ff1cc8cfadd7)

| Решение | Маршрутизация запросов | Аутентификация при запросах | Терминация HTTPS | Распространение |
|:---:|:---:|:---:|:---:|:---:|
| Kong | Да | Да | Да | Опенсоурс |
| Apache APISIX | Да | Да | Да | Опенсоурс |
| Gravitee.io | Да | Да | Да | Опенсоурс |
| KrakenD | Да | Да | Да | Опенсоурс  |
| Tyk | Да | Да | Да | Опенсоурс |
| Amazon API Gateway | Да | Да | Да | Платная |
| APIGee | Да | Да | Да | Платная |
| Azure API Management | Да | Да | Да | Платная  |
| Yandex API Gateway | Да | Да | Да | Платная  |

В настоящее время существует очень много как платных так и бесплатных  решение для обеспечения реализации API Gateway. Все зависит от финансовой возможности. Большинство облачных платформ предлагают свои решения для реализации API Gateway, в том числе с временным бесплатным использованием.
Если к примеру стек приложений развернут в том или иной обласной платформе, то лучше выбрать API именно этой платформы.
Выбор решения зависит от конкретных задач и потребностей. 
Также при выборе решения необходимо учитывать:
- простоту использования (простота в использовании и хорошая интегрированность с другими уже имеющимися инфораструктурами)
- маштабируемость (используемые инструменты должны поддерживать развитие организации)
- безопасность (надежные возможности единой регистрации и наличие политик для обязательного использования SSL)
- комплексность (иструмент должен включать как компонеты для разработчика (проектирование, тестирование, безопасность, управление), так и компонеты для потребителя (мониторин, использование)

Вывод: Большинство решений, обеспечиваю все необходимые требования для реализации API Gateway. Необходимо исходить из задач и потребностей, если уже используется какая-либо облачная платформа, то, на мой взгляд, лучше использовать API используемой облачной платформы.


## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

# Ответ

Для ответа в основном пользовался статьй (https://habr.com/ru/companies/innotech/articles/698838/)
| Возможности | Apache Kafka | RabbitMQ | Redis | ActiveMQ |
|:---:|:---:|:---:|:---:|:---:
| Поддержка кластеризации для обеспечения надежности | Да | Да | Да | Да |
| Хранение сообщений на диске в процессе доставки | Да | Да | Да | Да |
| Высокая скорость работы | Да | Да | Да | Нет |
| Поддержка различных форматов сообщений | BINARY on TCP | STOMP/AMQP/MQTT |  RESP | AMQP//MQTT/RESP и пр. |
| Разделение прав доступа к различным потокам сообщений | Да | Да | Да | Да |
| Простота эксплуатации | Нет | Да | Да | Да |

На сколько я понял сейчас наиболее часто используемые брокеры это Apache Kafka и RabbitMQ.
У каждого брокера свой набор задач и область применения.
Kafka — это легко масштабируемая система, обладающая повышенной отказоустойчивостью, что очень важно в крупных проектах. Высокий порог входа и высокие требования к ресурсам. 
RabbitMQ более простой в установке и настройке, успешно справляется с асинхронным обменом данными в микросервисной архитектуре. Более низкий порог входа и менее требователен к ресурсам. Отличный выбор если нет завышенных требований к отказоустойчивости и пропускной способности.

Вывод: оптиманый вариант RabbitMQ (низкий порог входа и менее требователен к ресурсам)

